---
title: "Script - TFM"
author: "Jorge Pascual Segovia"
date: "2023-04-21"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
```

<p>*Read unemployment rates of the different neighborhoods at 2023/3.*</p>
<p>
I extracted this data downloading the files provided by the Ayuntamiento de Madrid, the local government of the city, from the following webpage: https://www.madrid.es/portales/munimadrid/es/Inicio/El-Ayuntamiento/Estadistica/Areas-de-informacion-estadistica/Mercado-de-trabajo/Paro-registrado/Paro-registrado/?vgnextfmt=default&vgnextoid=e5a37da16f626810VgnVCM2000001f4a900aRCRD&vgnextchannel=f29e62a006986210VgnVCM2000000c205a0aRCRD.
</p>
<p>
This data contains the unemployment rate, estimated by survey methods, for each neighborhood, district and for the entire Madrid city at March, 2023; also distributed by age and gender, which could be useful to improve a good approximation towards the social class of the district. The unemployment rate is a useful feature to use as a proxy of the social class of an area, as areas with a lower unemployment rate are consistently related to a higher status, while working classes suffer the most the effect of structural unemployment. 
</p>
```{r}
df_paro_2023 <- read.csv("../Datasets - TFM/Raw datasets/Ayto de Madrid - Tasa de paro por distrito, barrio, edad y genero2.csv", skip = 10, header = F, sep = ";") %>% select(2, 3, 4, 5, 6, 8, 13) 

# Name the columns
colnames(df_paro_2023) <- c("Zone", "Total", "16 - 24 age", "25 - 44 age", "45 - 64 age", "Total men", "Total women")

# Remove empty rows
df_paro_2023 <- subset(df_paro_2023, Zone != "")

head(df_paro_2023, 10)
```

Read descriptive data about neighborhoods from Iguala at 2020 - 2021

```{r}
df_iguala <- read_csv2("../Datasets - TFM/Raw datasets/Barrios_Madrid_descriptive_data1 - Iguala_2020-2021.csv") %>% 
  select(# remove undesired variables
  -`Valor catastral medio (vivienda residencial)`, 
  -`Porcentaje de mujeres`, 
  -`Porcentaje de población menos de 14 años y mayor de 65 años`
  )
# Reliable? I need to search how is this data obtained.
```

